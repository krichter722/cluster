.TH "fence_check" "8" "September 2012" "" "fence configuration check"
.SH "NAME"
fence_check \- fence configuration check utility
.SH "SYNOPSIS"
\fBfence_check [\-h] [\-V] [\-d] [\-v] [\-e]
.SH "DESCRIPTION"
.PP 
The \fBfence_check\fP utility can be used to actively test the fence
configuration for each node in the cluster, by issuing status commands
instead of "reboot" "on" "off" commands on the configured fence
methods/devices in cluster.conf.

\fBfence_check\fP can also be very useful when executed via a cron job
for regular monitoring of fence devices and to detect issues after
cluster.conf changes.

.SH "OPTIONS"
.IP "\-h"
Print help message, then exit.
.IP "\-V"
Print program version information, then exit.
.IP "\-d"
Disable output to logfile (default /var/log/cluster/fence_check.log).
Useful in combination with \-e that could record sensitive data from
cluster.conf.
.IP "\-v"
Enable verbose output of all actions taken during execution.
Useful to debug issues with fence_check execution.
Use of \-v does not include \-e.
.IP "\-e"
Produce detailed output, in case of failure, of the command used to test
the fence device. Use of \-e does not include \-v.
ATTENTION: IT MIGHT SHOW FENCE PASSWORDS IN LOG FILES! USE WITH CARE!
.IP "\-f"
Override checks and force execution. DO NOT USE ON PRODUCTION CLUSTERS!

.SH "NOTES"
\fBfence_check\fP can only be executed when the following conditions are met:

\- cman is running on the node

\- the node is quorate

\- the node has joined the fence domain

\- the node is in charge of fencing for the whole cluster

\- no real fencing action is in progress

\- no other \fBfence_check\fP operations are in progress.

\fBfence_check\fP will perform all those checks prior starting a cluster wide
fence status check. When used in combination with \-f, cman must be running
on the node and no other processes must be performing a check at the same time.

By default every run of \fBfence_check\fP is logged to logfile and to stdout.

fence_check returns:

0 - if execution completes
1 - on generic execution errors (fatal)
2 - if cman is not running (fatal)
3 - node is not quorate/node is not part of fence domain/if node is not in charge of fencing/a real fencing operation is in progress (can be overridden)
4 - if another \fBfence_check\fP is in progress (fatal)
5 - if any of the fence status tests failed
